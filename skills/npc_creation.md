# Skill: Создание NPC

## Когда использовать
- Пользователь просит создать персонажа (NPC)
- Упоминает роль, локацию или принадлежность NPC
- Требуется типовой или уникальный персонаж для сеттинга

---

## Контекст (что читать перед началом)

### Обязательно прочитать:

1. **Локация** — если NPC привязан к городу/региону:
   - Файл города: `!Лор/Мир/103_Атлас/**/*.md`
   - Файл государства: `!Лор/Мир/106_Государства/**/*.md`

2. **Организация** — если NPC член организации:
   - `!Лор/Мир/107_Организации/**/*.md`

3. **Раса** — если NPC не человек:
   - `!Лор/Бестиарий/501_Расы/**/*.md`

### Опционально:
- Связанные события: `!Лор/Мир/102_События/**/*.md` (для исторического контекста)
- Другие NPC из той же локации (для консистентности)

---

## Методология

### 1. Уточняющие вопросы

Если информации недостаточно, спроси:
- В какой локации базируется NPC?
- Какая роль/профессия?
- Связь с организациями?
- Уникальный или типовой NPC?
- Нужно ли изображение?
- Какой уровень детализации? (краткий / полный)

### 2. Структура файла

**Frontmatter (обязательно):**
```yaml
---
type: npc
name: Полное имя
race: Раса
location: "[[Город или регион]]"
organization: "[[Организация]]"  # если применимо
tags: [npc, роль, категория, раса]
created: YYYY-MM-DD
modified: YYYY-MM-DD
author: агент
status: draft
---
```

**Основное содержание:**
```markdown
# Имя персонажа

## Основная информация
- **Раса:** [Раса]
- **Возраст:** [Возраст]
- **Пол:** [Пол]
- **Профессия/Роль:** [Роль]
- **Локация:** [[Город]]
- **Организация:** [[Организация]] (если есть)

## Описание
[1-2 абзаца общего описания: внешность, манеры, первое впечатление]

## Личность
- **Ключевые черты:** [2-3 черты характера]
- **Мотивация:** [Что движет персонажем]
- **Страхи/Слабости:** [Уязвимости]
- **Идеалы:** [Во что верит]

## История
[Краткая предыстория: происхождение, как оказался здесь, ключевые события жизни]

## Связи
- [[Другой NPC]] — описание отношений
- [[Организация]] — роль в организации
- [[Локация]] — связь с местом

## Роль в игре
[Как можно использовать в сессии: квестодатель, противник, союзник, информатор]

## Игромеханика (опционально)
[Статблок или ссылка на статблок из правил. Для типовых NPC можно указать CR и основные характеристики]

## Промпт для изображения (если нужно)
```
[Промпт на английском для генерации изображения]
--ar 9:16, dnd art, digital art
```
```

### 3. Wikilinks и метаданные

**Создай wikilinks на:**
- Локацию (город, регион)
- Организацию (если член)
- Связанных NPC (союзники, враги, родственники)
- Расу (если в лоре есть детальное описание)

**Заполни frontmatter:**
- `type: npc` — обязательно
- `location: "[[Город]]"` — с wikilink для графа связей
- `tags: [npc, роль, раса]` — для фильтрации в Bases

### 4. Целевая папка

**Выбери папку в зависимости от типа NPC:**

- `!Лор/НПЦ/401_Common/` — для **типовых NPC**:
  - Стражники, торговцы, ремесленники
  - Персонажи без уникальной истории
  - Могут быть переиспользованы в разных локациях

- `!Лор/НПЦ/402_Unique/` — для **уникальных персонажей**:
  - Квестодатели, боссы, важные фигуры
  - Персонажи с детальной историей
  - Связаны с основным сюжетом

- `!Лор/НПЦ/[государство]/` — для **привязанных к региону**:
  - Если существует папка государства (например: `!Лор/НПЦ/Фрия/`)
  - NPC тесно связаны с политикой/культурой региона

**Имя файла:** `Имя_Фамилия.md` или `Роль_Имя.md` (например: `Борг_Пепельный.md`, `Капитан_Марек.md`)

### 5. Консистентность

**Проверь на противоречия:**
- ✅ Соответствует ли NPC культуре локации?
- ✅ Логична ли его роль в организации?
- ✅ Нет ли конфликтов с установленным лором?
- ✅ Соответствует ли возраст историческим событиям? (текущий год: 1825 AR)
- ✅ Подходит ли NPC по тональности? (от dark fantasy до героики)

**Задавай вопросы:**
- "Почему этот персонаж здесь?"
- "Как он вписывается в локальную иерархию?"
- "Что делает его интересным для игроков?"

### 6. Changelog

**Добавь после frontmatter:**
```markdown
> [!changelog]
> **2026-02-07 (claude):** Создан NPC. [Краткое описание причины создания]
```

---

## Промпты для изображений

Если нужно изображение, используй skill `image_prompt.md` или следуй формату:

### Формат для NPC (портреты):
```
[Раса] [пол], [профессия/роль], [ключевая деталь одежды/экипировки], [эмоция/выражение], [окружение если важно]
--ar 9:16, dnd art, digital art
```

### Примеры:

**Стражник:**
```
Human male city guard, wearing blue tabard with silver anchor emblem, stern expression, holding spear, standing at harbor gate
--ar 9:16, dnd art, digital art
```

**Торговец:**
```
Dwarf male merchant, wearing rich velvet coat, friendly smile, behind counter with exotic goods, warm lighting
--ar 9:16, dnd art, digital art
```

**Мистический персонаж:**
```
Tiefling female fortune teller, wearing dark robes with golden embroidery, mysterious expression, surrounded by candles and tarot cards
--ar 9:16, dnd art, digital art
```

---

## Уровни детализации

### Краткий (для типовых NPC):
- Только основная информация
- 1 абзац описания
- 1-2 черты личности
- Минимум истории

### Полный (для уникальных NPC):
- Детальное описание всех секций
- Связи с другими NPC и организациями
- Роль в возможных квестах
- Секреты и скрытая информация
- Игромеханика (статблок или характеристики)

---

## Примеры по типам

### Типовой NPC (Common):

**Имя файла:** `Стражник_Эрик.md`
**Папка:** `!Лор/НПЦ/401_Common/`
**Детализация:** Краткая
**Использование:** Может появиться в любом городе как стражник

### Уникальный NPC (Unique):

**Имя файла:** `Капитан_Марек_Железная_Рука.md`
**Папка:** `!Лор/НПЦ/402_Unique/`
**Детализация:** Полная
**Использование:** Капитан стражи Сейры, связан с квестом

### Региональный NPC:

**Имя файл:** `Лорд_Валериан.md`
**Папка:** `!Лор/НПЦ/Фрия/` (если папка существует)
**Детализация:** Полная
**Использование:** Ключевая фигура политики королевства Фрия

---

## Особенности сеттинга Val'trey

При создании NPC учитывай:
- **Смешение рас:** Особенно в портовых городах (Сейра)
- **Dark fantasy тон:** Персонажи могут быть морально неоднозначными
- **История мира:** Текущий год 1825 AR, события прошлого влияют на персонажей
- **Астральный Кит:** Редко упоминается напрямую, но может быть частью культов/мистических организаций

---

## Чеклист перед завершением

- [ ] Frontmatter заполнен корректно
- [ ] Wikilinks созданы для всех связей
- [ ] Локация соответствует лору
- [ ] Персонаж вписывается в тональность
- [ ] Добавлен changelog
- [ ] Файл сохранён в правильную папку
- [ ] Промпт для изображения создан (если нужно)

---

**Последнее обновление:** 2026-02-07
**Автор skill:** claude
