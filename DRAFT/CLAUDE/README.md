# DRAFT: Оптимизированная структура AI-инструкций

**Дата создания:** 2026-02-07
**Автор:** Claude
**Статус:** На утверждении

**✅ Обновление путей:** Все пути обновлены на `C:\GoogleDrive\DND\` (junction для обхода кириллицы в `I:\Мой диск\`)

---

## Что находится в этой директории

Это драфт-версия оптимизированной структуры AI-инструкций для проекта Val'trey. Все файлы готовы к переносу в рабочую директорию после твоего утверждения.

---

## Структура драфта

```
DRAFT/CLAUDE/
├── prompts/
│   ├── system.md              — Обновлённый системный промпт (v2.0)
│   └── agent_template.md      — Шаблон для новых агентов
├── skills/                    — Специализированные задачи
│   ├── npc_creation.md        — Создание NPC
│   ├── image_prompt.md        — Генерация промптов для изображений
│   ├── lore_expansion.md      — Расширение лора
│   ├── location_design.md     — Дизайн локаций
│   ├── item_creation.md       — Создание предметов
│   └── session_processing.md  — Обработка записей сессий (бывший game_recap.md)
└── ROOT/                      — Файлы для корня проекта
    ├── CLAUDE.md              — Минимальная версия для Claude
    └── GEMINI.md              — Инструкции для Gemini

README.md                      — Этот файл
```

---

## Ключевые изменения

### 1. system.md (v2.0)
**Что добавлено:**
- Режимы работы (полный контекст / быстрый ответ)
- Навигация по проекту (Bases frontmatter, Grep примеры)
- Запрет сканирования `zАрхив/`
- Специализированные задачи (Skills) с таблицей
- Обновлённые правила документирования (когда создавать резюме)
- Структурированные метаданные (frontmatter для всех типов файлов)

**Что улучшено:**
- Чёткие инструкции по навигации без индексов
- Оптимизация использования токенов (не читать лишнее)
- Понятная таблица документирования по агентам

### 2. Skills (новая система)
**Создано 6 skills:**
- `npc_creation.md` — полная структура для создания NPC
- `image_prompt.md` — генерация промптов для изображений
- `lore_expansion.md` — расширение лора с проверкой противоречий
- `location_design.md` — дизайн городов, данжей, локаций
- `item_creation.md` — создание магических предметов
- `session_processing.md` — обработка записей игровых сессий (перенос game_recap.md)

**Особенности:**
- Каждый skill самодостаточен (полная структура внутри)
- Нет зависимости от внешних шаблонов
- Можно добавлять новые skills по мере необходимости

### 3. CLAUDE.md и GEMINI.md (минимизированы)
**Что изменено:**
- Убрана дублирующая информация (всё в system.md)
- Оставлен только императив инициализации
- Добавлены технические детали документирования

### 4. Templates (удалены)
**Решение:** Существующие шаблоны устарели и будут перенесены в `zАрхив/DELETED/templates_old/`

**Обоснование:**
- Ты не создаёшь файлы вручную
- Skills содержат полные структуры внутри себя
- В будущем можно попросить агента создать Template из skill

---

## Как применить изменения

### Вариант A: Автоматический перенос (рекомендуется)

**Если утверждаешь всё:**
1. Скажи: "Утверждаю, перенеси файлы"
2. Агент выполнит:
   - Перенос `DRAFT/CLAUDE/prompts/*` → `.llm/prompts/`
   - Перенос `DRAFT/CLAUDE/skills/*` → `.llm/skills/`
   - Перенос `DRAFT/ROOT/*` → корень проекта DND
   - Перемещение `game_recap.md` → `zАрхив/DELETED/`
   - Перемещение старых templates → `zАрхив/DELETED/templates_old/`
   - Обновление changelog
   - Создание/дополнение резюме

### Вариант B: Выборочное утверждение

**Если хочешь изменить что-то:**
1. Укажи, какие файлы нужно доработать
2. Агент внесёт правки в драфте
3. После утверждения — автоматический перенос

### Вариант C: Ручной перенос

**Если предпочитаешь контроль:**
1. Скопируй файлы из `DRAFT/CLAUDE/` вручную
2. Удали `.llm/prompts/game_recap.md`
3. Перемести старые templates в архив
4. Обнови `CLAUDE.md` и создай `GEMINI.md` в корне

---

## Что проверить перед утверждением

### 1. system.md
- [ ] Контекст сеттинга полон и актуален
- [ ] Режимы работы понятны
- [ ] Навигация с Bases frontmatter подходит
- [ ] Список skills корректен

### 2. Skills
- [ ] `npc_creation.md` — структура NPC соответствует твоим требованиям
- [ ] `image_prompt.md` — формат промптов подходит для Gemini
- [ ] `lore_expansion.md` — уровень критичности анализа устраивает
- [ ] `location_design.md` — структура локаций полная
- [ ] `item_creation.md` — баланс предметов учтён
- [ ] `session_processing.md` — workflow обработки сессий ясен

### 3. Минимальные файлы
- [ ] `CLAUDE.md` — минимален и понятен
- [ ] `GEMINI.md` — корректно описывает роль Gemini

### 4. Удаление старого
- [ ] Согласен с удалением `game_recap.md` из `.llm/prompts/`
- [ ] Согласен с перемещением templates в архив

---

## Открытые вопросы

Если есть вопросы, задай их перед утверждением:
- Нужны ли дополнительные skills?
- Изменить структуру frontmatter?
- Добавить что-то в system.md?
- Особые инструкции для конкретных агентов?

---

## Контакт с создателем драфта

Если что-то неясно в файлах, спроси у агента (Claude), который создал этот драфт.

---

**Готово к переносу:** Да
**Ожидается утверждение:** Пользователь
